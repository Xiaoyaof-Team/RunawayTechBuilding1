## 2月13日
### 修正
1. 现在无论从哪个楼梯向下，下一关开始时角色都会在左侧楼梯处。    
2. 修复了在最后一层继续与楼梯互动将会崩溃的问题    
### 增加
1. 在最后一关添加了逃出综一的门 安全出口EXIT（还未增加逃出互动）（走任意楼梯将会回到初始关）    

## 2月11日
### 增加
1.走廊钟表现在代表关卡了    
### 修正
1.修正了与讲台互动后跑偏的位置  

## 2月10日    
### 增加    
1.现在时钟可以实现互动，互动后会显示当前剩下的关卡数量    
2.**现在异常父类的事件处理函数被拆分，判断是否相交和按键事件被拆分处理，也就是说，如果你只是希望按下按键后对应的事件发生改变，你不在需要考虑事件发生所需要的相交前置，但是需要注意的是，对于on事件并没有作此拆分，如果你想要重写on事件需要考虑相交问题，但是可以直接调用isplayerwith系列函数，这类函数默认状态下返回bool值**     
3.**几乎所有的综合函数全部移动至异常大类内，Scene类中只存放基础实现**从而避免了指针p_s导致子类的重写函数没有生效的问题     
4.为几乎所有事件增加了空实现，减少了直接引入新函数导致需要重写整体的update/draw函数的情况     
总之，今天调整了一下，现在的异常更加好写，如果你想要换贴图，只需要重写对于的set函数，让某件事不发生只需要按需要重写on事件或者handleevent函数

## 2月10日

### 修正
1.开始游戏时角色动画异常的问题      
2.暂停时角色动画异常的问题      

### 增加
1.增加了游戏结束后角色恢复初始位置      
2.增加了初始动画        
3.新增了关卡钟      

## 2月9日

### 修正
1.在教室图片右侧新增门  
2.调整了钟表的对比度    
3.优化了角色行走    

## 2月8日
### 修正
1.更新了游戏标题    
2.修正了视角随角移动过程中菜单界面跟随移动的问题    
3.在人物player类中新增了部分用于控制人物和获取人物数据的函数    

### 增加
1.增加了基础场景并提供简单实现  
2.增加异常场景1：教室变得混乱  

### 简单介绍一下异常增加方法
首先，由于本人比较菜，似乎有更高级的方法，但我不会，所以依旧采用常见的基础类多态  
多态父类在`scene/abnormity/_manage/abnormity.hpp`中被定义  
基础实现在`scene/normity/scene.hpp`中被实现  

所有异常（包括无异常类0_normal）都在abnormity文件夹中创建新的文件夹，**命名时带上数字前缀代表了对应的异常编号**  
在`scene/abnormity/_manage/AllAbnormity.cpp`中根据编号和对应异常类名在管理类的构造中创建构造即可添加新的异常  
下面是添加异常处的代码截取，**通过搜索“异常添加处”可以快速定位至这里**  
```cpp
    // 异常添加处
    abnormityFactory[0] = [this]()
    { return std::make_unique<Normal>(p_s); };
    abnormityFactory[1] = [this]()
    { return std::make_unique<ClassroomWithManything>(p_s); };
```
下面是一个异常子类的基本格式  
```cpp
/*
 *@文件 ： A.hpp
 *@描述 ： A异常实现
 *@作者 ： 
 *@时间 ： 2026-2-X
 */
#pragma once
#include "abnormity.hpp"

class A : public Abnormity
{
public:
private:
public:
    using Abnormity::HandleEvent;
    A(Scene *scene) : Abnormity(scene) {}

private:
};
```
```cmake
target_sources(game_start PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/A.hpp
    ${CMAKE_CURRENT_SOURCE_DIR}/A.hpp
)

target_include_directories(game_start PRIVATE 
${CMAKE_CURRENT_SOURCE_DIR})
```

`using Abnormity::HandleEvent;`用于强制垃圾事件处理可以被同步到子类  
`A(Scene *scene) : Abnormity(scene) {}`用于初始化子类，子类初始化需要传入scene的指针，**该指针在AllAbnormity.cpp被引入且命名为p_s**  

**父类函数均为普通虚函数，均可以为重写，所有可重写函数及其对应的功能参考abnormity.hpp**  

**set函数不会在application中被连续调用，其只能手动调用，必须在每次更新场景时手动调用，否则预设的值不会调用**  

**默认是W键与门和楼梯交互，可以交互时不会显示提示，默认左楼梯无异常，右楼梯有异常**  

**如果需要测试异常实现的情况，可以在AllAbnormal.cpp文件的下述位置的注释更改掉**  
```cpp
// 生成新的随机数关卡、
int AllAbnormity::generateNewLevel()
{
    // return 1; // 测试用，直接返回对应关卡
    int n = 0;
    while (1)
    {
        if (getRandomLevel(1, 100) < 40)
        {
            return 0;
        }
        int newLevel = getRandomLevel(0, abnormityFactory.size() - 1);
        if (!gethasvisited(newLevel))
        {
            sethasvisited(newLevel);
            return newLevel;
        }
        n++;
        if (n >= 10)
            return 0;
        continue;
    }
}
```
